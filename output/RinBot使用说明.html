<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
<!--    文档标题-->
    <title>RinBot使用说明</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
</head>
<body>
<style>
    body {padding: 0 10px;}
</style>
<!--插入主题样式-->
<style></style>
<!--插入marked转换后的html-->
<div class="markdown-body"><h1 id="mirai-plugin-hrobot">Mirai-Plugin-HRobot</h1>
<p>mirai 群聊机器人插件，支持加群审批、敏感词检测撤回，支持每日定时任务，支持发送涩图(可指定tag)、美图、风景图等，支持随机鸡汤发送，支持坎公骑冠剑会战统计、前线报道、会战报表等功能，支持在线点歌，综合多个音乐平台发送最佳音乐，支持简单对话聊天，支持自定义关键词回复……更多功能正在开发。</p>
<p>在一些情况下，发送涩图无反应，但查看控制台日志却发送图片已经发送，这种情况可能是由于图片被腾讯 ”拦截“ 了，属于正常现象，如果这种情况频繁发生，说明号可能存在被封的风险，这种情况可以暂停使用此号，过会时间再用。</p>
<h2 id="快速使用">快速使用</h2>
<p>机器人运行必须要求 Java 运行时环境版本大于等于 11</p>
<p>建议您使用 mirai-console-loader 快速启动 mirai 机器人，下载地址：<a href="https://github.com/iTXTech/mirai-console-loader/releases">Releases · iTXTech/mirai-console-loader (github.com)</a>，下载后解压文件。</p>
<blockquote>
<p>网络上有很多教程，例如：<a href="https://www.bilibili.com/read/cv9584210">Mirai Console Loader的使用教程~ - 哔哩哔哩 (bilibili.com)</a></p>
</blockquote>
<p>如果你是新手，不会安装 java 环境，你可以使用安装器一键安装 java 环境 和 mcl，请移步：<a href="https://github.com/iTXTech/mcl-installer">mcl 一键安装</a></p>
<p>经过测试，HRobot 适配 mcl-1.2.2、mcl-1.2.1 版本，更早版本暂未测试。</p>
<p>前往<a href="https://github.com/happysnaker/mirai-plugin-HRobot/releases">Releases · happysnaker/mirai-plugin-HRobot (github.com)</a>选择对应版本下载插件 jar 包 plugin-SNAPSHOT.mirai.jar，将该 jar 包移动至 mcl 文件下的 plugins 文件夹下，然后无须配置任何文件，点击 mcl.cmd 即可启动机器人，注意如果你是第一次下载，你必须先启动一次 mcl.cmd 才会有 plugins 相关文件夹生成。</p>
<blockquote>
<p>Linux 下需要在当前文件下输入 ./mcl 命令启动.</p>
</blockquote>
<p>启动后在命令行中键入：<code>login QQ账号 QQ密码</code> 即可登录机器人，登录相关步骤请参考：<a href="./STEP.md">登录步骤</a></p>
<p>更多信息请移步<a href="https://github.com/mamoe/mirai">mamoe/mirai: 高效率 QQ 机器人支持库 (github.com)</a> 和  <a href="https://github.com/iTXTech/mirai-console-loader">iTXTech/mirai-console-loader: 模块化、轻量级且支持完全自定义的 mirai 加载器。 (github.com)</a></p>
<p>如果你需要砍公骑冠剑相关或更多高级功能，那么您必须配置相关信息，配置文件请移步 <a href="./CONFIG.md">配置文件手册</a></p>
<blockquote>
<p>更多功能正在开发，请 STAR 持续关注此项目</p>
</blockquote>
<h2 id="关键字示例">关键字示例</h2>
<p><strong>表格展示为最新版插件功能，默认情况下，与机器人聊天需要@机器人，而其他关键字都无须 @，详情请查看下表中的“示例”，你可以在 <a href="./HISTORY_VERSION.md">历史版本关键字及命令</a> 中找到历史版本对应关键字，在配置文件中你可以选择关闭 @。</strong></p>
<table>
<thead>
<tr>
<th>特殊关键字</th>
<th align="left">示例</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>…</td>
<td align="left">@机器人 你好呀</td>
<td>与机器人聊天，在默认情况下这需要 @机器人 才会得到回复，不过你可以进行配置以关闭它，机器人还支持笑话、歌词、计算等其他功能，你可以前往<a href="http://api.qingyunke.com/">青云客智能聊天机器人API </a>查看具体信息</td>
</tr>
<tr>
<td>帮助</td>
<td align="left">@机器人 帮助</td>
<td>显示主菜单</td>
</tr>
<tr>
<td>前线报道</td>
<td align="left">前线报道</td>
<td>查看工会战前线Boss信息</td>
</tr>
<tr>
<td>会战报表</td>
<td align="left">会战报表</td>
<td>查看当日出刀情况</td>
</tr>
<tr>
<td>会战统计</td>
<td align="left">会战统计</td>
<td>统计本次会战所有参与玩家数据，包括对任一 Boss 的数据统计</td>
</tr>
<tr>
<td>会战统计</td>
<td align="left">会战统计好开心</td>
<td>统计玩家名为“好开心”的会战数据，此功能会包含出刀数和输出饼状图</td>
</tr>
<tr>
<td>查刀</td>
<td align="left">查刀 成员1 成员2</td>
<td>查询 成员1、成员2 的出刀情况，机器人会发送柱状图以表示出刀情况</td>
</tr>
<tr>
<td>查刀折线图</td>
<td align="left">用法同上</td>
<td>“查刀” 使用柱状图生成，适合多成员比对；“查刀折线图” 使用折线图，适合查看单成员数据，因为多成员可能会出现线“重合问题”</td>
</tr>
<tr>
<td>谁未出刀</td>
<td align="left">谁未出刀</td>
<td>查看今日谁没出刀，可以通过配置或命令设置公会成员，若不设置，则默认群内所有成员都是公会成员，这可能造成错误@，此功能必须要求群成员昵称完全等于游戏名</td>
</tr>
<tr>
<td>谁没出刀</td>
<td align="left">谁没出刀</td>
<td>同谁未出刀</td>
</tr>
<tr>
<td>催刀</td>
<td align="left">催刀</td>
<td>机器人 @ 所有未出刀的群成员并催刀，可以通过配置或命令设置公会成员，若不设置，则默认群内所有成员都是公会成员，这可能造成错误@，此功能必须要求群成员昵称完全等于游戏名</td>
</tr>
<tr>
<td>一键催刀</td>
<td align="left">一键催刀</td>
<td>机器人 @ 所有未出刀的群成员并催刀，相较于 催刀 而言，此功能还会 @ 出了刀但未出满的成员，可以通过配置或命令设置公会成员，若不设置，则默认群内所有成员都是公会成员，这可能造成错误@，此功能必须要求群成员昵称完全等于游戏名</td>
</tr>
<tr>
<td>鸡汤</td>
<td align="left">鸡汤</td>
<td>发送随机鸡汤，有一定的概率发送毒鸡汤，你可以在配置文件中配置这个概率</td>
</tr>
<tr>
<td>美图</td>
<td align="left">美图</td>
<td>发送随机二刺螈美图</td>
</tr>
<tr>
<td>风景图</td>
<td align="left">风景图</td>
<td>发送随机风景图</td>
</tr>
<tr>
<td>神秘代码</td>
<td align="left">神秘代码萝莉 白丝</td>
<td>发送涩图，可指定 tag，tag 之间存在空格</td>
</tr>
<tr>
<td>涩图</td>
<td align="left">涩图萝莉 白丝</td>
<td>发送涩图，可指定 tag，tag 之间存在空格，相较于神秘代码而言，此涩图放开 R18 限制，更加涩涩，默认情况下发送图片后 30s 后自动撤回，可通过配置修改撤回时间</td>
</tr>
<tr>
<td>高清涩图</td>
<td align="left">同上</td>
<td>画质更高，但接口不稳定，容易出错</td>
</tr>
<tr>
<td>音乐</td>
<td align="left">音乐克罗地亚狂想曲</td>
<td>从酷我、QQ、网易云聚合搜索音乐，并发送卡片</td>
</tr>
<tr>
<td><del>咪咕</del></td>
<td align="left"><del>咪咕七里香</del></td>
<td><del>从咪咕音乐搜索，咪咕音乐可以免费听周杰伦的所有歌曲</del></td>
</tr>
<tr>
<td>百度百科</td>
<td align="left">百度百科 基金</td>
<td>查询 基金 的百度百科释义</td>
</tr>
<tr>
<td>装弹</td>
<td align="left">装弹</td>
<td>给俄罗斯轮盘赌手枪装弹，默认将以配置文件的弹夹数为主，也可以添加参数自定义弹数，例如 “装弹 2 6” 表示总弹夹 6 发，真弹 2 发，不过自定义弹夹数需要机器人群管理员或者 QQ 群管理员权限</td>
</tr>
<tr>
<td>开枪</td>
<td align="left">开枪</td>
<td>开枪！一旦成员被命中，他将无法继续参与游戏，当剩余下一次开枪必中或者必不中时，游戏结束</td>
</tr>
<tr>
<td>卸下弹夹</td>
<td align="left">卸下弹夹</td>
<td>由机器人群管理员或者 QQ 群管理员提前结束游戏</td>
</tr>
<tr>
<td>疫情</td>
<td align="left">深圳疫情</td>
<td>查询深圳疫情，可通过 &quot;地点疫情&quot; 查询对应地点疫情，支持国家查询，数据来源：<a href="https://wp.m.163.com/163/page/news/virus_report/index.html?_nw_=1&amp;_anw_=1">网易新闻</a></td>
</tr>
<tr>
<td>自定义关键字</td>
<td align="left">——</td>
<td>可以通过配置或者命令设置自定义关键字及回复，关键字和回复可以是纯文本，也可以是表情、图片等，详情请前往配置手册或命令手册查看。<strong>当回复是图片时，请注意图片不一定能在服务器上长期保存。</strong></td>
</tr>
</tbody></table>
<h2 id="命令">命令</h2>
<p>在 2.0 版本后，你可以通过命令的形式远程配置机器人，随时随地进行配置，<strong>你只要在群聊中发布相关命令即可。</strong></p>
<p>但是你必须要有对应的权限，在最开始，你需要在配置文件中配置你自己成为超级管理员，随后你便可以通过命令的形式授予或移除他人权限，配置文件相关信息可参考：<a href="./CONFIG.md">配置手册</a>。</p>
<blockquote>
<p>超级管理员 &gt; 管理员 &gt; 群管理员 &gt; 坎公管理员</p>
</blockquote>
<p>下表展示最新版插件插件功能，你可以在 <a href="./HISTORY_VERSION.md">历史版本关键字及命令</a> 中找到历史版本对应信息。</p>
<p><strong>注意，所有命令都必须以 # 开头，如果不执行 保存配置 文件，那么所有命令配置将在机器人关机时丢失。</strong></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>示例</th>
<th>功能</th>
<th>权限要求</th>
</tr>
</thead>
<tbody><tr>
<td>#保存配置</td>
<td>#保存配置</td>
<td>将由命令造成的配置更改写入配置文件以持久化</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#重载配置</td>
<td>#重载配置</td>
<td>重新载入配置文件</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#查看配置状态</td>
<td>#查看配置状态</td>
<td>查看是否有命令执行成功</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#查看配置日志</td>
<td>#查看配置日志</td>
<td>若有命令执行成功，查看命令执行日志</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#授予管理员权限</td>
<td>#授予管理员权限 123456</td>
<td>权限命令，授予 qq 为 123456 用户管理员权限</td>
<td>必须要求自身权限大于被操作对象的权限以及要授予的权限</td>
</tr>
<tr>
<td>#授予坎公管理员权限</td>
<td>#授予坎公管理员权限 123456</td>
<td>权限命令，授予 qq 为 123456 用户授予坎公管理员权限</td>
<td>必须要求自身权限大于被操作对象的权限以及要授予的权限</td>
</tr>
<tr>
<td>#授予群管理员权限</td>
<td>#授予群管理员权限 123456</td>
<td>权限命令，授予 qq 为 123456 用户群管理员权限</td>
<td>必须要求自身权限大于被操作对象的权限以及要授予的权限</td>
</tr>
<tr>
<td>#移除管理员权限</td>
<td>#移除管理员权限 123456</td>
<td>权限命令，移除 qq 为 123456 用户管理员权限</td>
<td>必须要求自身权限大于被操作对象的权限</td>
</tr>
<tr>
<td>#移除坎公管理员权限</td>
<td>#移除坎公管理员权限 123456</td>
<td>权限命令，移除 qq 为 123456 用户的坎公管理员权限</td>
<td>必须要求自身权限大于被操作对象的权限</td>
</tr>
<tr>
<td>#移除群管理员权限</td>
<td>#移除群管理员权限 123456</td>
<td>权限命令，移除 qq 为 123456 用户群管理员权限</td>
<td>必须要求自身权限大于被操作对象的权限</td>
</tr>
<tr>
<td>#查看权限</td>
<td>#查看权限</td>
<td>权限命令，查看自身的权限，也可以通过“#查看权限 qq” 来查看他人的权限</td>
<td>无要求</td>
</tr>
<tr>
<td>#设置关键字回复</td>
<td>#设置关键字回复 {自定义关键字} 自定义回复</td>
<td>设定<strong>全局生效</strong>的自定义关键字及回复，关键字及回复都可以是图片或表情，你必须使用 {} 将关键字包裹起来，除关键字和命令之外的其他任何消息都将会被视为回复</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#设置关键字回复</td>
<td>#设置关键字回复 {#regex#呜*[\s]*} 你呜尼玛呢</td>
<td>默认情况下，机器人通过“编辑距离”算法检测关键词相似度，但当关键字以特殊前缀 “#regex#” 打头时，表示关键字是一个正则表达式，例如 “呜*[\s]*” 将匹配任意个 “呜“ 及多余的空格</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#设置关键字回复</td>
<td>(引用消息)#设置关键字回复  关键字</td>
<td>你还可以引用一条消息来代表回复，通过此方式，关键字无须用 {} 包裹，请注意删除 @ 信息，否则关键字必须也要 @ 触发</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#设置群内关键字回复</td>
<td>用法同上</td>
<td>群内关键字回复只针对发送者的群生效</td>
<td>至少是群管理员权限</td>
</tr>
<tr>
<td>#移除关键字</td>
<td>#移除关键字  关键字</td>
<td>移除一条全局的关键字</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#移除群内关键字</td>
<td>#移除群内关键字  关键字</td>
<td>移除一条发送者群内的关键字</td>
<td>至少是群管理员权限</td>
</tr>
<tr>
<td>#清空关键字</td>
<td>#清空关键字</td>
<td>清空全局的关键字</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#清空群内关键字</td>
<td>#清空群内关键字</td>
<td>清空发送者群内的关键字</td>
<td>至少是群管理员权限</td>
</tr>
<tr>
<td>#清空所有关键字</td>
<td>#清空所有关键字</td>
<td>#清空所有（包括群内）的关键字</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#设置坎公公会成员</td>
<td>#设置坎公公会成员 成员1 成员2 ......</td>
<td>将成员1、成员2、......、成员 N 设置为发送者群对应的坎公公会成员(<strong>会覆盖原有的配置</strong>)，<strong>执行添加或移除成员前，必须先执行此命令或通过配置文件配置</strong></td>
<td>至少是坎公管理员权限</td>
</tr>
<tr>
<td>#添加坎公公会成员</td>
<td>#添加坎公公会成员 成员1 成员2 ......</td>
<td>在原有配置的基础上，动态的增添成员</td>
<td>至少是坎公管理员权限</td>
</tr>
<tr>
<td>#移除坎公公会成员</td>
<td>#移除坎公公会成员 成员1 成员2 ......</td>
<td>在原有配置的基础上，动态的移除成员</td>
<td>至少是坎公管理员权限</td>
</tr>
<tr>
<td>#清空坎公公会成员</td>
<td>#清空坎公公会成员</td>
<td>清空发送者群对应的坎公公会成员</td>
<td>至少是坎公管理员权限</td>
</tr>
<tr>
<td>#查看坎公公会成员</td>
<td>#查看坎公公会成员</td>
<td><strong>查看坎公公会成员，在配置后可调用此命令查看配置结果</strong></td>
<td>至少是坎公管理员权限</td>
</tr>
<tr>
<td>#设置坎公cookie</td>
<td>#设置坎公cookie 123456 ikhqwe</td>
<td>将群 123456 的 cookie 设置为 ikhqwe</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#开机</td>
<td>#开机</td>
<td>开启机器人</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#关机</td>
<td>#关机</td>
<td>关闭机器人，在关机状态下，机器人仅监听开机命令</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#开启自动审批</td>
<td>#开启自动审批</td>
<td>开启加群自动审批，机器人会自动审批加群通知，此命令还可以接验证消息，例如 #开启自动审批 123456，那么只有在成员加群验证消息完全匹配时才会同意，否则会拒绝（请赋予机器人管理员）</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#关闭自动审批</td>
<td>#关闭自动审批</td>
<td>关闭自动审批</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#开启敏感词检测</td>
<td>#开启敏感词检测</td>
<td>开启敏感词检测，检测敏感词并撤回（请赋予机器人管理员），如需此功能请前往配置文件配置相关信息并配置敏感词库</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#关闭敏感词检测</td>
<td>#关闭敏感词检测</td>
<td>关闭敏感词检测</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#设置定时任务</td>
<td>#设置定时任务{18-0-10-1}你好呀</td>
<td>配置定时任务，以{}包裹配置信息，{}中配置形式为 {hour-minute-count-image}，具体含义可前往配置文件查看，暂不支持中途取消任务，可以选择停止机器人运行，如果 count 为 0，当调用保存配置命令时，这将会被写入配置文件持久化</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#开启涩图</td>
<td>#开启涩图</td>
<td>开启涩图功能，默认开启</td>
<td>至少是管理员权限</td>
</tr>
<tr>
<td>#关闭涩图</td>
<td>#关闭涩图</td>
<td>关闭涩图功能，防止群被封</td>
<td>至少是管理员权限</td>
</tr>
</tbody></table>
<h2 id="配置">配置</h2>
<p>项目秉持着开箱即用的原则，正常使用本插件不需要任何配置，但是如果你需要一些高级功能，或者涉及到某些需要 cooike 的功能，例如砍公会战管理，此时你必须前往配置文件中进行配置。</p>
<p>HRobot 支持配置文件，配置文件在 mcl/config/com.happysnaker.HRobot/config.yaml 中，您可以手动创建配置文件，不过建议您运行一次 mcl.cmd，这会自动生产配置文件，配置文件相关信息可参考：<a href="./CONFIG.md">配置手册</a></p>
<p>在 2.0 版本后，你还可以通过命令的形式配置机器人。</p>
<h2 id="贡献">贡献</h2>
<p>提出你的创意，或者再此源代码上进行二次开发，开发相关手册可参考：<a href="https://github.com/happysnaker/mirai-plugin-HRobot/blob/master/DEV.md">开发手册</a></p>
<h2 id="声明">声明</h2>
<p>我不是生产者，我只是 API 的搬运工，由于 API 随时可能停用，故此插件可能随时出问题，请您 <strong>star</strong> 此项目，一般情况下 API 失效都会第一时间解决（☞ 指重新找一个 API）。</p>
<p>所有使用 API 均为网络上免费 API，如下为主要使用的 API 列表：</p>
<blockquote>
<ul>
<li>智能聊天：<a href="http://api.qingyunke.com/">青云客智能聊天机器人API (qingyunke.com)</a></li>
<li>Bing 壁纸：<a href="https://bing.ioliu.cn/">必应每日高清壁纸 - 精彩，从这里开始 (ioliu.cn)</a></li>
<li><del>咪咕音乐：<a href="https://www.liumingye.cn/archives/304.html">咪咕音乐链接歌词封面接口API - 刘明野的博客 (liumingye.cn)</a></del></li>
<li>聚合音乐：<a href="https://tonzhon.com/">铜钟 - 在一处聆听所有音乐 (tonzhon.com)</a></li>
<li>Pivix 涩图：<a href="https://api.lolicon.app/#/">Lolicon API</a></li>
<li>坎公骑冠剑：<a href="https://www.bigfun.cn/tools/gt/">坎公百宝袋-bigfun社区</a></li>
<li>鸡汤：<a href="api.shadiao.app">沙雕 APP 开放接口</a></li>
<li>疫情：<a href="https://wp.m.163.com/163/page/news/virus_report/index.html?_nw_=1&amp;_anw_=1">实时更新|新冠肺炎疫情动态地图 (163.com)</a></li>
</ul>
</blockquote>
</div>
</body>
</html>
